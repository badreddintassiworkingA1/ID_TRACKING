<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upload JSON to Firestore</title>
</head>
<body>
  <h2>ğŸ“¤ğŸ“¤ Upload Email Data to SEED</h2>
  <textarea id="jsonData" placeholder="Ø£Ù„ØµÙ‚ Ù‡Ù†Ø§ Ø¨ÙŠØ§Ù†Ø§Øª JSON" style="width:100%;height:200px;"></textarea>
  <br><br>
  <button onclick="uploadData()">ğŸš€ Ø§Ø±ÙØ¹ Ø§Ù„Ø¢Ù†</button>

  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBPDV9tvjHwrrT2a5xHlaKhnCjkIqlDF28",
      authDomain: "seed1-a4ee7.firebaseapp.com",
      projectId: "seed1-a4ee7"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.uploadData = async function () {
      const textarea = document.getElementById("jsonData");
      let data;
      try {
        data = JSON.parse(textarea.value);
      } catch (err) {
        alert("âš ï¸ ØµÙŠØºØ© JSON ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
        return;
      }

      const promises = [];

      for (const system in data) {
        const ref = doc(db, "emailLists", system);
        const content = data[system];
        promises.push(setDoc(ref, content));
      }

      try {
        await Promise.all(promises);
        alert("âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Firestore");
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±ÙØ¹:", error);
        alert("âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");
      }
    }
  </script>
</body>
</html>

