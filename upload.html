<!DOCTYPE html>
<html>
<head>
  <title>Upload Emails to Firestore</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js"></script>
</head>
<body>
  <h2>📤 Upload Email Data to SEED</h2>

  <textarea id="jsonData" style="width: 100%; height: 300px;" placeholder='Paste your JSON data here...'></textarea>
  <button onclick="uploadData()">Upload Data</button>

  <script>
    // 🔧 Firebase Configuration (استبدل بالقيم الخاصة بك)
    const firebaseConfig = {
      apiKey: "AIzaSyBTMu-iEZODJ-VWc6SdhxrR87WJV4n9D3Y",
      authDomain: "seed-38e79.firebaseapp.com",
      projectId: "seed-38e79"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function uploadData() {
      const raw = document.getElementById("jsonData").value.trim();
      if (!raw) return alert("Please paste JSON data first.");

      let parsed;
      try {
        parsed = JSON.parse(raw);
      } catch (e) {
        alert("⚠️ Invalid JSON format");
        return;
      }

      // upload each system
      for (let system in parsed) {
        const systemData = parsed[system];

        try {
          await db.collection("emailLists").doc(system).set(systemData);
          console.log(`✅ Uploaded ${system}`);
        } catch (error) {
          console.error(`❌ Failed for ${system}:`, error);
        }
      }

      alert("✅ All data uploaded successfully.");
    }
  </script>
</body>
</html>
