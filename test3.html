<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ID Checker + Suggestions</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f0f0f0;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
    }
    #result {
      margin-top: 20px;
      font-size: 18px;
    }
    .suggestion {
      color: #555;
      font-family: monospace;
      margin: 4px 0;
    }
  </style>
</head>
<body>

  <h1>🔍 ID Checker + Suggestions</h1>

  <input type="text" id="subid" placeholder="Enter subid..." />
  <button onclick="checkID()">Check</button>

  <div id="result"></div>

  <script>
    let idList = {};

    fetch('idList.json')
      .then(response => response.json())
      .then(data => {
        idList = data;
      })
      .catch(error => {
        document.getElementById("result").innerHTML = "❌ Failed to load ID list.";
        console.error(error);
      });

    function checkID() {
      const subidInput = document.getElementById("subid").value.trim().toLowerCase();
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";

      if (!subidInput) {
        resultDiv.innerHTML = "⚠️ Please enter a subid.";
        return;
      }

      // البحث عن ID مطابق داخل القائمة
      let found = false;
      for (const id in idList) {
        if (subidInput.includes(id)) {
          resultDiv.innerHTML = `✅ Found: <strong>${idList[id]}</strong> (ID: <code>${id}</code>)`;
          found = true;
          break;
        }
      }

      if (!found) {
        // إذا لم يتم العثور على ID مباشر، نقترح احتمالات
        const parts = subidInput.split("-");
        if (parts.length > 1) {
          const encryptedPart = parts[1].trim();
          const ignoreChars = ["l", "r", "a", "u", "g", "p", "m", "s", "c", "d", "i"];
          const variants = generateVariants(encryptedPart, ignoreChars);

          resultDiv.innerHTML = "❌ No match found. <br><br>💡 Suggestions:";
          variants.slice(0, 10).forEach(variant => {
            resultDiv.innerHTML += `<div class="suggestion">– ${variant}</div>`;
          });
        } else {
          resultDiv.innerHTML = "❌ No match found. Cannot generate suggestions.";
        }
      }
    }

    function generateVariants(text, ignoreChars) {
      const filtered = text.split("").filter(char => !ignoreChars.includes(char)).join("");
      const variants = [];

      // توليد احتمالات مكونة من 3 خانات
      for (let i = 0; i < filtered.length - 2; i++) {
        variants.push(filtered.slice(i, i + 3));
      }

      // إزالة التكرارات
      return [...new Set(variants)];
    }
  </script>

</body>
</html>
